Работа с процессами
====

Расширение имеет минимально необходимый набор методов для создания демонов-процессов. 
Это установка пользователя и группы для процесса, настройка приоритета процессов.

# Исполнение внешних программ

Расширение позволяет вызывать подпроцессы асинзронно, то есть разрешить deferred когда процес заершится (успешно или нет)

```php

// получим список файлов которые не под версией
$result = yield ION\Process::exec('git status -s');

// $result instanceof ION\Process\Exec
print $result->stdout; // выведет результат программы git
```

Для более гибкой работы с созданными подпроцессами у метода `ION\Process::exec()` есть набор параметров, который задается массивом.
 
| Параметр | Описание            | Значение                | Значение по умлочанию |
| -------- | ------------------- | ----------------------- | --------------------- |
| `cwd`    | путь в котором будет выполнятся программа | строка, существующий путь до директории | текущая директория (`getcwd()`) |
| `user`   | UID или имя пользователя под которым будет запущена программа | строка или число, существующий пользователь системы | текущий пользователь |
| `group`  | GID или имя группы под которым будет запущена программа | строка или число, существующая группа в системе | текущая группа |
| `pid`    | PID запущенного процесса, задается в переменную по ссылке | ссылка на переменную | |
| `cancel` | Номер или название сигнала, который будет послан при отмене | число или строка | `SIGTERM` |


```php
$result = yield ION\Process::exec('git pull --prune', [
    'cwd' => '/www/app',            // указываем где  выполнять программу
    'pid' => &$this->git_pull_pid   // сохранить PID  процесса программы в свойство 
]);
```

Когда расширение запускает процесс то для процесс объявляется переменная окружения `_ION_EXEC_LINE`, 
которая содержить путь до PHP файла и и строчку где был вызван


```php
$result = yield ION\Process::exec('echo $_ION_EXEC_LINE');

print $result->stdout; // выведет что-то похожее на /www/app/src/CVS/GitDriver.php:562
```

# Дочерние процессы

